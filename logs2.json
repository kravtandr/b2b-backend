gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:23.201Z","caller":"gateway/main.go:36","msg":"gateway started ..."}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:42.450Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:52784","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:42.452Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:52788","url":"/product/profile"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:42.464Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:52796","url":"/company/NaN"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:42.465Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:52794","url":"/product/profile"}
gateway_1                     | 2024/08/08 15:06:42 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:42.471Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
gateway_1                     | 2024/08/08 15:06:42 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:42.476Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:42.461Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:06:42Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.109}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:42.467Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:06:42Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.078}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:42.470Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:42.480Z","caller":"v4/conn.go:354","msg":"Query","pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0],"time":0.009821981,"rowCount":0}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:42.480Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:42.480Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:06:42Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:59568","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":10.595}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.458Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:42.481Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.485Z","caller":"v4/conn.go:354","msg":"Query","time":0.026157551,"rowCount":1,"pid":34,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.485Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:42Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":26.691}
gateway_1                     | 2024/08/08 15:06:42 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | 2024/08/08 15:06:42 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.488Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.494Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.006272812,"rowCount":1,"pid":34}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.495Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:42Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":6.637}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.498Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.503Z","caller":"v4/conn.go:354","msg":"Query","pid":34,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.004603412,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.503Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:42Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":5.062}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:42.508Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.507Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.513Z","caller":"v4/conn.go:354","msg":"Query","pid":34,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.004166008,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:42.514Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:42Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":6.377}
gateway_1                     | 2024/08/08 15:06:42 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:42.516Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:43.434Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:52800","url":"/company/products"}
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:06:43.437Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:43.436Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:43.448Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.010568224,"rowCount":0,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:43.448Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:43Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:43718","grpc.code":"OK","grpc.time_ms":11.336}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:43.452Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.173Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:47514","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.176Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:47518","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.177Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.178Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.183Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:47522","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.179Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.181Z","caller":"v4/conn.go:354","msg":"Query","pid":34,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.003774674,"rowCount":1}
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.181Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":4.355}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.203Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
auth_service_1                | 2024/08/08 15:06:51 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.184Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.184Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.185Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.188Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.003415302,"rowCount":1,"pid":34}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.188Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":4.093}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.192Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.198Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.005378111,"rowCount":1,"pid":34,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.198Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":6.032}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.196Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:47536","url":"/company/NaN"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.214Z","caller":"repository/logging.go:247","msg":"productsCategories_repo","Action":"GetProductsList","Request":{"Product_name":"","Category_name":"Метиз и крепеж","Categories_ids":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001],"Price_lower_limit":1,"Price_higher_limit":10000,"QueryParam":{"Skip":0,"Limit":12}}}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:51.204Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.204Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.211Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.212Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.218Z","caller":"v4/conn.go:354","msg":"Query","time":0.013044868,"rowCount":1,"pid":34,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.218Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":13.534}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.208Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:47534","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.208Z","caller":"http/logging.go:11","msg":"/products/list/filter","method":"POST","remote_addr":"172.25.0.1:47538","url":"/products/list/filter"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.226Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.085}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.226Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.031}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.223Z","caller":"v4/conn.go:354","msg":"Query","time":0.019549853,"rowCount":0,"pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.223Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.223Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:59568","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":20.124}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.224Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:47558","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.224Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:47574","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.224Z","caller":"http/logging.go:11","msg":"/user/payment/handle/all","method":"POST","remote_addr":"172.25.0.1:47552","url":"/user/payment/handle/all"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.224Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:47556","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.224Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:47554","url":"/product/chat"}
gateway_1                     | 2024/08/08 15:06:51 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.224Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.225Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:47568","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.225Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:47570","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.225Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | 2024/08/08 15:06:51 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.227Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.233Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.233Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.233Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.233Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.233Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.233Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | 2024/08/08 15:06:51 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.227Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.225Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:47572","url":"/allchats"}
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.236Z","caller":"v4/conn.go:354","msg":"Query","time":0.003734736,"rowCount":1,"pid":34,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.237Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":3.964}
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.240Z","caller":"v4/conn.go:354","msg":"Query","time":0.003430702,"rowCount":1,"pid":34,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.240Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":7.253}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.242Z","caller":"v4/conn.go:354","msg":"Query","time":0.001115156,"rowCount":1,"pid":34,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.242Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":8.675}
auth_service_1                | 2024/08/08 15:06:51 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.244Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.241Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.245Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.002438965,"rowCount":1,"pid":34}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.245Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":11.802}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.246Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.247Z","caller":"v4/conn.go:354","msg":"Query","pid":34,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.00200566,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.247Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":13.928}
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.251Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.252Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
auth_service_1                | 2024/08/08 15:06:51 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.250Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.253Z","caller":"v4/conn.go:354","msg":"Query","time":0.005720289,"rowCount":1,"pid":34,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.254Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":20.77}
auth_service_1                | 2024/08/08 15:06:51 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.256Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.258Z","caller":"v4/conn.go:354","msg":"Query","pid":34,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.003833751,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.258Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":15.508}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.261Z","caller":"v4/conn.go:354","msg":"Query","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.002256145,"rowCount":1,"pid":34,"sql":"SELECT user_id FROM Cookies WHERE hash = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.261Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUserIdByCookie","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":15.049}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.263Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.264Z","caller":"repository/logging.go:98","msg":"auth_repo","Action":"GetUsersPayments","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.270Z","caller":"v4/conn.go:354","msg":"Query","time":0.023845716,"rowCount":1,"pid":36,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.272Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":34,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.010785343}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.272Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":21.98}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.274Z","caller":"v4/conn.go:354","msg":"Query","time":0.002140444,"rowCount":1,"pid":34,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.274Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":18.051}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.275Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":34,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.000745052}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.275Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":12.177}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.276Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.278Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:51.279Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.278Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.282Z","caller":"v4/conn.go:354","msg":"Query","args":["","Метиз и крепеж","{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24, (truncated 3835 bytes)",1,10000,0,12],"time":0.067614092,"rowCount":9,"pid":30,"sql":"SELECT pr.id, pr.name, description,price, cat.id, cat.name FROM products as pr JOIN (SELECT product_id, category_id FROM productscategories) as prcat ON pr.id = prcat.product_id JOIN (SELECT categories.id, categories.name From categories) as cat ON  prcat.category_id = cat.id WHERE pr.name ~* $1 AND (cat.name  ~* $2 AND cat.id = Any ($3)) AND price BETWEEN $4 AND $5 OFFSET $6 LIMIT $7"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.290Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[142],"time":0.007328374,"rowCount":1,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.299Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[143],"time":0.008665121,"rowCount":1,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.304Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[144],"time":0.004776372}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.309Z","caller":"v4/conn.go:354","msg":"Query","pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[145],"time":0.004764153,"rowCount":1}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.313Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[146],"time":0.004102246,"rowCount":1,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.317Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[147],"time":0.003880941,"rowCount":1,"pid":30}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.320Z","caller":"v4/conn.go:354","msg":"Query","time":0.049782407,"rowCount":1,"pid":36,"sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16]}
chat_service_1                | 2024/08/08 15:06:51 chats_amount =  1
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.322Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[148],"time":0.004778095}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.327Z","caller":"v4/conn.go:354","msg":"Query","time":0.004274665,"rowCount":1,"pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[149]}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.332Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[150],"time":0.005654518,"rowCount":1,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:51.333Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductsListByFilters","peer.address":"172.25.0.1:43718","grpc.code":"OK","grpc.time_ms":118.597}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.343Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":142}
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.348Z","caller":"v4/conn.go:354","msg":"Query","time":0.004810044,"rowCount":1,"pid":38,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[142]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.349Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000720099}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.349Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":5.967}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.345Z","caller":"v4/conn.go:354","msg":"Query","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.055567148,"rowCount":1,"pid":63,"sql":"SELECT user_id FROM Cookies WHERE hash = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.346Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":161.702}
auth_service_1                | 2024/08/08 15:06:51 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.347Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.351Z","caller":"v4/conn.go:354","msg":"Query","pid":67,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.027519519,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.351Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":140.14}
auth_service_1                | 2024/08/08 15:06:51 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.352Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.357Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":143}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.359Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[143],"time":0.001320752,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.360Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.00110363,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.360Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":2.904}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.361Z","caller":"v4/conn.go:354","msg":"Query","pid":67,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.010003401,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.361Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":83.176}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:51.363Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.363Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.364Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":144}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.365Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[144],"time":0.001149226,"rowCount":1,"pid":38}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.366Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.082034702,"rowCount":1,"pid":64}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.366Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":188.822}
gateway_1                     | 2024/08/08 15:06:51 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | 2024/08/08 15:06:51 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.367Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.370Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.004126739,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.370Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":6.335}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.372Z","caller":"v4/conn.go:354","msg":"Query","args":[16,13],"time":0.009746281,"rowCount":1,"pid":67,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.372Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":93.268}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.372Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":145}
gateway_1                     | 2024/08/08 15:06:51 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.373Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.375Z","caller":"v4/conn.go:354","msg":"Query","pid":38,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[145],"time":0.002501114,"rowCount":1}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.380Z","caller":"v4/conn.go:354","msg":"Query","time":0.059417724,"rowCount":1,"pid":36,"sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16]}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.380Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllUserChats","peer.address":"172.25.0.1:44916","grpc.code":"OK","grpc.time_ms":139.234}
gateway_1                     | 2024/08/08 15:06:51 Chat already unblurred:  77  Blured:  false
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.383Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.008222745,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.383Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":11.321}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.385Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":146}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.384Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.387Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.001058368,"rowCount":1,"pid":36}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.388Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[146],"time":0.002598546}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.389Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000758292,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.389Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.838}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.391Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":147}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.392Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[147],"time":0.001018473}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.393Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000620611,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.393Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":1.945}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.394Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":148}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.395Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[148],"time":0.000885035,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.396Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.000873468,"rowCount":1,"pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.396Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":2.026}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.398Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":149}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.399Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[149],"time":0.000871663,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.399Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.00035424,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.399Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":1.543}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.401Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":150}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.402Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[150],"time":0.000793495,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.402Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.000892391,"rowCount":1,"pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.403Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":1.946}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.403Z","caller":"v4/conn.go:354","msg":"Query","time":0.030974138,"rowCount":1,"pid":67,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.403Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":56.365}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.404Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.406Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.002200016,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.406Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":53.555}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.407Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.407Z","caller":"v4/conn.go:354","msg":"Query","time":0.001593989,"rowCount":1,"pid":67,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.408Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":44.994}
gateway_1                     | 2024/08/08 15:06:51 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.408Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.411Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.003134386,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.411Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":43.589}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.412Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.413Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.002144459,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.413Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":8.736}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:51.414Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.414Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.415Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.001709899,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.415Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":8.572}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:51.416Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.416Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
gateway_1                     | 2024/08/08 15:06:51 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.420Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | 2024/08/08 15:06:51 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.421Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.418Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.002475865,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.418Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":6.394}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:51.419Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.419Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.420Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":67,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.001461295}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.420Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":5.79}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.421Z","caller":"v4/conn.go:354","msg":"Query","pid":67,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.001201869,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.421Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":4.671}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.427Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.005526323,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.427Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":8.089}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.429Z","caller":"http/logging.go:19","msg":"/products/list/filter","status":200}
gateway_1                     | 2024/08/08 15:06:51 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.431Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.436Z","caller":"v4/conn.go:354","msg":"Query","time":0.069594333,"rowCount":1,"pid":64,"sql":"SELECT COUNT(id) FROM Payments WHERE user_id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.436Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersPayments","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":172.174}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.437Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.091484825,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.437Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":161.833}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.438Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.050565351,"rowCount":1,"pid":36}
chat_service_1                | 2024/08/08 15:06:51 chats_amount =  1
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.442Z","caller":"v4/conn.go:354","msg":"Query","time":0.003410288,"rowCount":1,"pid":36,"sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16]}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.443Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllChatsAndLastMsg","peer.address":"172.25.0.1:44916","grpc.code":"OK","grpc.time_ms":58.925}
gateway_1                     | 2024/08/08 15:06:51 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS &[]
gateway_1                     | 2024/08/08 15:06:51 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS CONFIRMED
gateway_1                     | 2024/08/08 15:06:51 userId from cookie: 16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.449Z","caller":"http/logging.go:19","msg":"/allchats","status":200}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.447Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":186}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.448Z","caller":"v4/conn.go:354","msg":"Query","pid":38,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[186],"time":0.000773621,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.449Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000364929}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.449Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":2.257}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:51.447Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.447Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.448Z","caller":"repository/logging.go:98","msg":"auth_repo","Action":"GetUsersPayments","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.454Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":63,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.006391701}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.454Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":6.682}
gateway_1                     | 2024/08/08 15:06:51 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.455Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.458Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.017050989,"rowCount":1,"pid":68}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.460Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":63,"sql":"SELECT COUNT(id) FROM Payments WHERE user_id = $1","args":[16],"time":0.00446281}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.461Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"HandlePaidPayments","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":13.033}
gateway_1                     | 2024/08/08 15:06:51 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS CREDITED
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.462Z","caller":"http/logging.go:19","msg":"/user/payment/handle/all","status":200}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.468Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.010429901,"rowCount":1,"pid":68}
chat_service_1                | 2024/08/08 15:06:51 chats_amount =  1
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.472Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.003393822,"rowCount":1,"pid":68}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.472Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllUserChats","peer.address":"172.25.0.1:44916","grpc.code":"OK","grpc.time_ms":221.25}
gateway_1                     | 2024/08/08 15:06:51 Chat already unblurred:  77  Blured:  false
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.477Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.479Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.001649357,"rowCount":1,"pid":68}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.481Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.002179268,"rowCount":1,"pid":68,"sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id"}
chat_service_1                | 2024/08/08 15:06:51 chats_amount =  1
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.486Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.0036106,"rowCount":1,"pid":68}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:51.486Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllChatsAndLastMsg","peer.address":"172.25.0.1:44916","grpc.code":"OK","grpc.time_ms":9.194}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.488Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":186}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.490Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[186],"time":0.000920191,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.490Z","caller":"v4/conn.go:354","msg":"Query","time":0.000625346,"rowCount":1,"pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:51.490Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:51Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":2.253}
gateway_1                     | 2024/08/08 15:06:51 userId from cookie: 16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:51.491Z","caller":"http/logging.go:19","msg":"/allchats","status":200}
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:06:52.176Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:52.176Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:52.178Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.002049504,"rowCount":0,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:52.178Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:52Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:43718","grpc.code":"OK","grpc.time_ms":2.632}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:52.175Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:47586","url":"/company/products"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:52.180Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.364Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.365Z","caller":"v4/conn.go:354","msg":"Query","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.001554281,"rowCount":1,"pid":63,"sql":"SELECT user_id FROM Cookies WHERE hash = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.365Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:54Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":1.939}
auth_service_1                | 2024/08/08 15:06:54 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.368Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:54.356Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:47590","url":"/company/NaN"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:54.360Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:54.361Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:47598","url":"/product/profile"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:54.361Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:47594","url":"/user/me"}
gateway_1                     | 2024/08/08 15:06:54 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:54.363Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
gateway_1                     | 2024/08/08 15:06:54 Helpers ValidateSession set UserIDContextKey:  16
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:54.362Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:06:54Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.096}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:54.372Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:47602","url":"/product/profile"}
gateway_1                     | 2024/08/08 15:06:54 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:54.373Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:54.373Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:06:54Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.067}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:54.357Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.373Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.004300233,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.373Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:54Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":4.578}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:54.359Z","caller":"v4/conn.go:354","msg":"Query","args":[0],"time":0.001016431,"rowCount":0,"pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:54.359Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:54.359Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:06:54Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:59568","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":1.506}
gateway_1                     | 2024/08/08 15:06:54 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:54.379Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.376Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.377Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.000812117,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.377Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:54Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":1.078}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:54.378Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.378Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.378Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.000511587,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:54.378Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:54Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":0.855}
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:06:55.369Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:55.369Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:55.371Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.00142399,"rowCount":0,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:55.371Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:55Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:43718","grpc.code":"OK","grpc.time_ms":2.509}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:55.367Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:37092","url":"/company/products"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:55.372Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.676Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37096","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.677Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37100","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.678Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.678Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.679Z","caller":"v4/conn.go:354","msg":"Query","pid":67,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.000653072,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.679Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":0.957}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.679Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.000923034,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.679Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":1.147}
auth_service_1                | 2024/08/08 15:06:57 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.681Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.682Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.001230215,"rowCount":1,"pid":63,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.682Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":1.479}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.683Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | 2024/08/08 15:06:57 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.683Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.684Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.00091646,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.684Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":1.151}
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.691Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.684Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.000796523,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.689Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":5.871}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.686Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:37106","url":"/company/NaN"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.690Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37108","url":"/user/me"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.694Z","caller":"v4/conn.go:354","msg":"Query","time":0.00235809,"rowCount":0,"pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.698Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.697Z","caller":"repository/logging.go:247","msg":"productsCategories_repo","Action":"GetProductsList","Request":{"Product_name":"","Category_name":"Метиз и крепеж","Categories_ids":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001],"Price_lower_limit":1,"Price_higher_limit":10000,"QueryParam":{"Skip":0,"Limit":12}}}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.694Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.694Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:59568","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":2.735}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.694Z","caller":"http/logging.go:11","msg":"/products/list/filter","method":"POST","remote_addr":"172.25.0.1:37116","url":"/products/list/filter"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.697Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37114","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.698Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.701Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:37132","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.702Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37144","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.702Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:37138","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.702Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37140","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.702Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:37134","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.702Z","caller":"http/logging.go:11","msg":"/user/payment/handle/all","method":"POST","remote_addr":"172.25.0.1:37142","url":"/user/payment/handle/all"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.702Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:37136","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.703Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37148","url":"/user/me"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.706Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.049}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.706Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.013}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.713Z","caller":"v4/conn.go:354","msg":"Query","pid":30,"sql":"SELECT pr.id, pr.name, description,price, cat.id, cat.name FROM products as pr JOIN (SELECT product_id, category_id FROM productscategories) as prcat ON pr.id = prcat.product_id JOIN (SELECT categories.id, categories.name From categories) as cat ON  prcat.category_id = cat.id WHERE pr.name ~* $1 AND (cat.name  ~* $2 AND cat.id = Any ($3)) AND price BETWEEN $4 AND $5 OFFSET $6 LIMIT $7","args":["","Метиз и крепеж","{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24, (truncated 3835 bytes)",1,10000,0,12],"time":0.015978503,"rowCount":9}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.703Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":67,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.001205214}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.704Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":5.986}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.704Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.704Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:57.704Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.704Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.705Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.705Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.709Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.709Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.709Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.710Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | 2024/08/08 15:06:57 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.710Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.710Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.005879215,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.710Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":6.056}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.711Z","caller":"v4/conn.go:354","msg":"Query","pid":67,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.000514398,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.711Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":6.494}
gateway_1                     | 2024/08/08 15:06:57 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.706Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | 2024/08/08 15:06:57 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.706Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.720Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.015321165,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.720Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":15.738}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.722Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.001667784,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.722Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":17.749}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.725Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.002005511,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.725Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":15.75}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.727Z","caller":"v4/conn.go:354","msg":"Query","time":0.013430779,"rowCount":1,"pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[142]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.731Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.019572925,"rowCount":1,"pid":67,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.731Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":26.32}
auth_service_1                | 2024/08/08 15:06:57 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.732Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
gateway_1                     | 2024/08/08 15:06:57 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.730Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.735Z","caller":"v4/conn.go:354","msg":"Query","args":[143],"time":0.008111326,"rowCount":1,"pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1"}
auth_service_1                | 2024/08/08 15:06:57 authDelivery -> GetUser 16
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.735Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.736Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.736Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.739Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.007864297,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.739Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":29.843}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.741Z","caller":"v4/conn.go:354","msg":"Query","pid":36,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.004978799,"rowCount":1}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.743Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.00781511,"rowCount":1,"pid":68,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.741Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.746Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.004537421,"rowCount":1,"pid":36}
chat_service_1                | 2024/08/08 15:06:57 chats_amount =  1
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.748Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.004286986,"rowCount":1,"pid":68}
chat_service_1                | 2024/08/08 15:06:57 chats_amount =  1
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.751Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.002415802,"rowCount":1,"pid":68}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.752Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.026442011,"rowCount":1,"pid":63}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.751Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllUserChats","peer.address":"172.25.0.1:44916","grpc.code":"OK","grpc.time_ms":15.641}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.752Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":42.674}
gateway_1                     | 2024/08/08 15:06:57 Chat already unblurred:  77  Blured:  false
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.755Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | 2024/08/08 15:06:57 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.758Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.759Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.004287028,"rowCount":1,"pid":68,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.760Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[144],"time":0.024280347,"rowCount":1,"pid":30}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.764Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.00428223,"rowCount":1,"pid":68}
chat_service_1                | 2024/08/08 15:06:57 chats_amount =  1
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.766Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":63,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.013755403}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.767Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":56.958}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.768Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:57.770Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.770Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.772Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.004889932,"rowCount":1,"pid":63}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.773Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[145],"time":0.011493679,"rowCount":1,"pid":30}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.773Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":40.949}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.776Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.778Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.032774143,"rowCount":1,"pid":36}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.779Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllUserChats","peer.address":"172.25.0.1:44916","grpc.code":"OK","grpc.time_ms":42.953}
gateway_1                     | 2024/08/08 15:06:57 Chat already unblurred:  77  Blured:  false
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.783Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.784Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[146],"time":0.010567834,"rowCount":1,"pid":30}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.785Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.045807393,"rowCount":1,"pid":67}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.786Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.002649349,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.786Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":76.545}
gateway_1                     | 2024/08/08 15:06:57 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | 2024/08/08 15:06:57 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.790Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.793Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.006380465,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.793Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUserIdByCookie","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":52.309}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.795Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[147],"time":0.010604339,"rowCount":1,"pid":30}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.796Z","caller":"repository/logging.go:98","msg":"auth_repo","Action":"GetUsersPayments","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.799Z","caller":"v4/conn.go:354","msg":"Query","time":0.004970471,"rowCount":1,"pid":67,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.800Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":41.656}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.801Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.804Z","caller":"v4/conn.go:354","msg":"Query","time":0.0066504,"rowCount":1,"pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[148]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.804Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.004430625,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.806Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":37.645}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:57.808Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.808Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.808Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.002114635,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.808Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":38.655}
gateway_1                     | 2024/08/08 15:06:57 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.809Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.810Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.001635247,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.810Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":34.562}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.811Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.001005711,"rowCount":1,"pid":67}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.812Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":22.073}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.812Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.026285627,"rowCount":1,"pid":36}
chat_service_1                | 2024/08/08 15:06:57 chats_amount =  1
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.819Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":186}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.819Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":186}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.820Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:57.814Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.814Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.814Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.815Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.050991641,"rowCount":1,"pid":68}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.816Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllChatsAndLastMsg","peer.address":"172.25.0.1:44916","grpc.code":"OK","grpc.time_ms":60.842}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.817Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.005068754,"rowCount":1,"pid":36}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.817Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllChatsAndLastMsg","peer.address":"172.25.0.1:44916","grpc.code":"OK","grpc.time_ms":34.895}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.824Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[149],"time":0.019001306,"rowCount":1,"pid":30}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.827Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[186],"time":0.007499912,"rowCount":1,"pid":38}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.827Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.052795422,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.829Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":92.126}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.831Z","caller":"v4/conn.go:354","msg":"Query","pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.00208633,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.831Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.832Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":13.555}
gateway_1                     | 2024/08/08 15:06:57 userId from cookie: 16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.833Z","caller":"http/logging.go:19","msg":"/allchats","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.838Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[150],"time":0.013458429,"rowCount":1,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:57.839Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductsListByFilters","peer.address":"172.25.0.1:43718","grpc.code":"OK","grpc.time_ms":142.103}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.841Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.012067453,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.842Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":41.272}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:57.846Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.846Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.846Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.003671594,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.847Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":39.353}
gateway_1                     | 2024/08/08 15:06:57 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.849Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.852Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.005020658,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.852Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":38.59}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.853Z","caller":"v4/conn.go:354","msg":"Query","time":0.000945286,"rowCount":1,"pid":63,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16]}
gateway_1                     | 2024/08/08 15:06:57 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.854Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.857Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":142}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.858Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":43.451}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:57.860Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.859Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.866Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.007047837,"rowCount":1,"pid":63,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.866Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":35.764}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.867Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[142],"time":0.010376641,"rowCount":1,"pid":38}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:06:57.869Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:322\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.869Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000702092,"rowCount":1,"pid":38}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.868Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.871Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":13.962}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.872Z","caller":"v4/conn.go:354","msg":"Query","time":0.004732239,"rowCount":1,"pid":63,"sql":"SELECT COUNT(id) FROM Payments WHERE user_id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.872Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersPayments","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":76.673}
gateway_1                     | 2024/08/08 15:06:57 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS &[]
gateway_1                     | 2024/08/08 15:06:57 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS CONFIRMED
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.874Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":143}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.876Z","caller":"repository/logging.go:98","msg":"auth_repo","Action":"GetUsersPayments","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.877Z","caller":"v4/conn.go:354","msg":"Query","pid":63,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.004401667,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.877Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":31.544}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.882Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.004738719,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.883Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":23.189}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.875Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[143],"time":0.001294463,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.876Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000721987,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.877Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":2.864}
gateway_1                     | 2024/08/08 15:06:57 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.878Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | 2024/08/08 15:06:57 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.884Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | 2024/08/08 15:06:57 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.886Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.878Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":144}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.880Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[144],"time":0.000707356,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.880Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.00077074,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.881Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.164}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.885Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.002317695,"rowCount":1,"pid":63}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:06:57.885Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:53826","grpc.code":"OK","grpc.time_ms":17.059}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.893Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":145}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.895Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[145],"time":0.001930465,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.897Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001119447}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.897Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.65}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.900Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":146}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.901Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[146],"time":0.001232592,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.903Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000973925,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.903Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.192}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.904Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":147}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.906Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[147],"time":0.001651697}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.907Z","caller":"v4/conn.go:354","msg":"Query","args":[186],"time":0.008484008,"rowCount":1,"pid":70,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.908Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001587998,"rowCount":1,"pid":38}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.908Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":4.006}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.912Z","caller":"v4/conn.go:354","msg":"Query","pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.004683053,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.912Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":92.545}
gateway_1                     | 2024/08/08 15:06:57 userId from cookie: 16
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.914Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":148}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.915Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":70,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[148],"time":0.001064715}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.913Z","caller":"http/logging.go:19","msg":"/allchats","status":200}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.917Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001380011,"rowCount":1,"pid":70}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.917Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":5.357}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.919Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":149}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.920Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[149],"time":0.000853202,"rowCount":1,"pid":70}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.921Z","caller":"v4/conn.go:354","msg":"Query","time":0.001072784,"rowCount":1,"pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.922Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":2.717}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.923Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":150}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.925Z","caller":"v4/conn.go:354","msg":"Query","time":0.001326277,"rowCount":1,"pid":70,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[150]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.926Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001286258,"rowCount":1,"pid":70}
company_service_1             | {"level":"info","ts":"2024-08-08T15:06:57.926Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:57Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.025}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:57.929Z","caller":"http/logging.go:19","msg":"/products/list/filter","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:58.683Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:37156","url":"/company/products"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:06:58.685Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:58.685Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:58.688Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.00275761,"rowCount":0,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:06:58.688Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:06:58Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:43718","grpc.code":"OK","grpc.time_ms":3.135}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:06:58.689Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:00.423Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:37160","url":"/company/NaN"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:00.426Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37164","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:00.426Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:37168","url":"/product/profile"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:00.427Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:00.430Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:37172","url":"/product/profile"}
gateway_1                     | 2024/08/08 15:07:00 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:00.431Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:00.431Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | 2024/08/08 15:07:00 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:00.432Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:00.425Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:00.429Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0],"time":0.003953832,"rowCount":0,"pid":70}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:00.429Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:00.429Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:07:00Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:59568","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":4.356}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:00.430Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:07:00Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.114}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:00.431Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:07:00Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.047}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:01.420Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:37176","url":"/company/products"}
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:07:01.422Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:01.422Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:01.424Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.001238953,"rowCount":0,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:01.424Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:01Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:43718","grpc.code":"OK","grpc.time_ms":1.954}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:01.425Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.077Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37180","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.078Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.083Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.083Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37184","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.086Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37192","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.086Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:37188","url":"/company/NaN"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.088Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.089Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0],"time":0.000894877,"rowCount":0,"pid":70}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.089Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.089Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:59568","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":1.306}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.087Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.089Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.095Z","caller":"http/logging.go:11","msg":"/products/list/filter","method":"POST","remote_addr":"172.25.0.1:37196","url":"/products/list/filter"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.097Z","caller":"repository/logging.go:247","msg":"productsCategories_repo","Action":"GetProductsList","Request":{"Product_name":"","Category_name":"Метиз и крепеж","Categories_ids":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001],"Price_lower_limit":1,"Price_higher_limit":10000,"QueryParam":{"Skip":0,"Limit":12}}}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.103Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT pr.id, pr.name, description,price, cat.id, cat.name FROM products as pr JOIN (SELECT product_id, category_id FROM productscategories) as prcat ON pr.id = prcat.product_id JOIN (SELECT categories.id, categories.name From categories) as cat ON  prcat.category_id = cat.id WHERE pr.name ~* $1 AND (cat.name  ~* $2 AND cat.id = Any ($3)) AND price BETWEEN $4 AND $5 OFFSET $6 LIMIT $7","args":["","Метиз и крепеж","{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24, (truncated 3835 bytes)",1,10000,0,12],"time":0.006210264,"rowCount":9,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.106Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.075}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.107Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:43718","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.034}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.102Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37208","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.102Z","caller":"http/logging.go:11","msg":"/user/payment/handle/all","method":"POST","remote_addr":"172.25.0.1:37206","url":"/user/payment/handle/all"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.105Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:37218","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.105Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37228","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.105Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37216","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.105Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:37222","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.105Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:37226","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.105Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:37224","url":"/product/chat"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.113Z","caller":"v4/conn.go:354","msg":"Query","pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[142],"time":0.010092285,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.104Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.104Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.107Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.108Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.108Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.108Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.112Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:37232","url":"/user/me"}
gateway_1                     | 2024/08/08 15:07:04 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.112Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | 2024/08/08 15:07:04 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.112Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:07:04.114Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.123Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[143],"time":0.009377912}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.129Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[144],"time":0.005339839,"rowCount":1,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.135Z","caller":"v4/conn.go:354","msg":"Query","args":[145],"time":0.005526188,"rowCount":1,"pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.142Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[146],"time":0.00583944,"rowCount":1,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.149Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[147],"time":0.005609207,"rowCount":1,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.160Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[148],"time":0.005320662,"rowCount":1,"pid":30}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.166Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[149],"time":0.005875392}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.173Z","caller":"v4/conn.go:354","msg":"Query","pid":30,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[150],"time":0.007573228,"rowCount":1}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:04.173Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductsListByFilters","peer.address":"172.25.0.1:43718","grpc.code":"OK","grpc.time_ms":76.896}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.182Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":142}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.184Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[142],"time":0.000712276,"rowCount":1,"pid":70}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.186Z","caller":"v4/conn.go:354","msg":"Query","pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001267067,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.186Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.831}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.188Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":143}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.190Z","caller":"v4/conn.go:354","msg":"Query","args":[143],"time":0.001452998,"rowCount":1,"pid":70,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.191Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001443308}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.192Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.381}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.194Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":144}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.195Z","caller":"v4/conn.go:354","msg":"Query","pid":70,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[144],"time":0.001647723,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.197Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001190946}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.197Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.203}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.199Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":145}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.200Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":70,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[145],"time":0.001306875}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.201Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.00108145}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.201Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":2.813}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.203Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":146}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.205Z","caller":"v4/conn.go:354","msg":"Query","args":[146],"time":0.000652434,"rowCount":1,"pid":70,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.206Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.001176536,"rowCount":1,"pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.206Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":2.97}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.208Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":147}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.210Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[147],"time":0.001492567,"rowCount":1,"pid":70}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.211Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001161158,"rowCount":1,"pid":70}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.211Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.042}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.213Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":148}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.214Z","caller":"v4/conn.go:354","msg":"Query","args":[148],"time":0.001557734,"rowCount":1,"pid":70,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.216Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.001130388,"rowCount":1,"pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.216Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":3.149}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.217Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":149}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.220Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[149],"time":0.002925745,"rowCount":1,"pid":70}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.222Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.001215112,"rowCount":1,"pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.222Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":4.456}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.223Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":150}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.225Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":70,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[150],"time":0.001060084}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.226Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.000732533,"rowCount":1,"pid":70,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:07:04.226Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:04Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:59568","grpc.code":"OK","grpc.time_ms":2.875}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:04.237Z","caller":"http/logging.go:19","msg":"/products/list/filter","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:05.093Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:37682","url":"/company/products"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:07:05.096Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:05.096Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:05.100Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.003407023,"rowCount":0,"pid":30}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:07:05.101Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:07:05.100Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:07:05Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:43718","grpc.code":"OK","grpc.time_ms":3.912}