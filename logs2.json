auth_service_1                | {"level":"error","ts":"2024-08-08T16:51:07.676Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.676Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.677Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.29.0.1:49406","grpc.code":"OK","grpc.time_ms":59.474}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:07.680Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[150],"time":0.034437814}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:07.681Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductsListByFilters","peer.address":"172.29.0.1:56526","grpc.code":"OK","grpc.time_ms":143.969}
auth_service_1                | {"level":"error","ts":"2024-08-08T16:51:07.683Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.682Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.687Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":142}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.689Z","caller":"v4/conn.go:354","msg":"Query","pid":36,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[142],"time":0.001204474,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.690Z","caller":"v4/conn.go:354","msg":"Query","time":0.000930171,"rowCount":1,"pid":36,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.690Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":2.573}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.691Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.029637438,"rowCount":1,"pid":75}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.692Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.29.0.1:49406","grpc.code":"OK","grpc.time_ms":76.012}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.693Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":143}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.694Z","caller":"v4/conn.go:354","msg":"Query","args":[143],"time":0.000797086,"rowCount":1,"pid":36,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.695Z","caller":"v4/conn.go:354","msg":"Query","time":0.000915903,"rowCount":1,"pid":36,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.695Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":75,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.002052672}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.696Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":2.204}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.696Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.29.0.1:49406","grpc.code":"OK","grpc.time_ms":25.481}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.698Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
gateway_1                     | 2024/08/08 16:51:07 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:07.699Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.701Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":144}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.703Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.006951152,"rowCount":1,"pid":75}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.704Z","caller":"v4/conn.go:354","msg":"Query","pid":36,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[144],"time":0.001986598,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.704Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.29.0.1:49406","grpc.code":"OK","grpc.time_ms":29.59}
gateway_1                     | 2024/08/08 16:51:07 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:07.706Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.707Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.003676348,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.708Z","caller":"v4/conn.go:354","msg":"Query","args":[16,13],"time":0.003678713,"rowCount":1,"pid":75,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.708Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.29.0.1:49406","grpc.code":"OK","grpc.time_ms":25.702}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.709Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":6.212}
gateway_1                     | 2024/08/08 16:51:07 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:07.709Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
chat_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.711Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":78,"sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.037670139}
chat_service_1                | 2024/08/08 16:51:07 chats_amount =  1
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.713Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT COUNT(id) FROM Payments WHERE user_id = $1","args":[16],"time":0.00437951,"rowCount":1,"pid":75}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.713Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersPayments","peer.address":"172.29.0.1:49406","grpc.code":"OK","grpc.time_ms":42.78}
gateway_1                     | 2024/08/08 16:51:07 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS &[]
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.716Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":145}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.717Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[145],"time":0.001293487,"rowCount":1,"pid":36}
gateway_1                     | 2024/08/08 16:51:07 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS CONFIRMED
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.719Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":36,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001892087}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.720Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":4.276}
auth_service_1                | 2024/08/08 16:51:07 in service delivery -> authDelivery -> HandlePaidPayments 16
auth_service_1                | 2024/08/08 16:51:07  in service usecase -> authUseCase -> HandlePaidPayments 16
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.721Z","caller":"repository/logging.go:98","msg":"auth_repo","Action":"GetUsersPayments","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.724Z","caller":"v4/conn.go:354","msg":"Query","time":0.009947382,"rowCount":1,"pid":75,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.725Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.29.0.1:49406","grpc.code":"OK","grpc.time_ms":26.127}
chat_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.726Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.014159961,"rowCount":1,"pid":78}
chat_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.727Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllUserChats","peer.address":"172.29.0.1:50542","grpc.code":"OK","grpc.time_ms":56.134}
gateway_1                     | 2024/08/08 16:51:07 Chat already unblurred:  77  Blured:  false
auth_service_1                | {"level":"error","ts":"2024-08-08T16:51:07.729Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.729Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.730Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.733Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":78,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.002210199}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.733Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":146}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.736Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[146],"time":0.00176397,"rowCount":1,"pid":36}
chat_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.738Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.003714404,"rowCount":1,"pid":78}
chat_service_1                | 2024/08/08 16:51:07 chats_amount =  1
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.740Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.003410389,"rowCount":1,"pid":36}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.740Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":7.351}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.742Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":147}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.743Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[147],"time":0.001239966,"rowCount":1,"pid":36}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.745Z","caller":"v4/conn.go:354","msg":"Query","time":0.001037774,"rowCount":1,"pid":36,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.745Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":3.502}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.747Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":148}
chat_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.748Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.010254558,"rowCount":1,"pid":78}
chat_service_1                | {"level":"info","ts":"2024-08-08T16:51:07.749Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllChatsAndLastMsg","peer.address":"172.29.0.1:50542","grpc.code":"OK","grpc.time_ms":18.558}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.750Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[148],"time":0.002976976,"rowCount":1,"pid":36}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.752Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":186}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.753Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.003000571,"rowCount":1,"pid":36}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.754Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.754Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":6.561}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.756Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":149}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.759Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[149],"time":0.002071239,"rowCount":1,"pid":36}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.760Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":36,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000699619}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.760Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":3.859}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.762Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":150}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.763Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[150],"time":0.001289214,"rowCount":1,"pid":36}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.764Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":36,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000721783}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.765Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":3.001}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:07.767Z","caller":"http/logging.go:19","msg":"/products/list/filter","status":200}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.784Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[186],"time":0.003441965,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.788Z","caller":"v4/conn.go:354","msg":"Query","time":0.003155572,"rowCount":1,"pid":87,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:07.788Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:07Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":36.008}
gateway_1                     | 2024/08/08 16:51:07 userId from cookie: 16
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:07.790Z","caller":"http/logging.go:19","msg":"/allchats","status":200}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:08.532Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.29.0.1:45408","url":"/company/products"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:08.536Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
productscategories_service_1  | {"level":"error","ts":"2024-08-08T16:51:08.533Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:08.533Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:08.535Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.001785547,"rowCount":0,"pid":38}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:08.535Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:08Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.29.0.1:56526","grpc.code":"OK","grpc.time_ms":2.337}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:08.669Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:08.670Z","caller":"v4/conn.go:354","msg":"Query","rowCount":0,"pid":87,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0],"time":0.000896548}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:08.670Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:08.670Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T16:51:08Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.29.0.1:53260","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":1.267}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:08.673Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:08.668Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.29.0.1:45412","url":"/company/NaN"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:08.671Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:08.673Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.29.0.1:45416","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:08.673Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.29.0.1:45420","url":"/product/profile"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:08.675Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.29.0.1:45424","url":"/product/profile"}
gateway_1                     | 2024/08/08 16:51:08 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:08.675Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:08.675Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T16:51:08Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.29.0.1:56526","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.071}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:08.677Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T16:51:08Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.29.0.1:56526","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.076}
gateway_1                     | 2024/08/08 16:51:08 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:08.677Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:09.674Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.29.0.1:45428","url":"/company/products"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
productscategories_service_1  | {"level":"error","ts":"2024-08-08T16:51:09.676Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:09.676Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:09.681Z","caller":"v4/conn.go:354","msg":"Query","pid":38,"sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.004167013,"rowCount":0}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:09.682Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:09.681Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:09Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.29.0.1:56526","grpc.code":"OK","grpc.time_ms":5.439}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.507Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.29.0.1:45432","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.507Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.29.0.1:45436","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.508Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.508Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.516Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.29.0.1:45442","url":"/company/NaN"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.516Z","caller":"http/logging.go:11","msg":"/products/list/filter","method":"POST","remote_addr":"172.29.0.1:45444","url":"/products/list/filter"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.521Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.522Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0],"time":0.000808339,"rowCount":0,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.522Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.522Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.29.0.1:53260","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":1.058}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.527Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.528Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.29.0.1:45448","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.528Z","caller":"http/logging.go:11","msg":"/user/payment/handle/all","method":"POST","remote_addr":"172.29.0.1:45460","url":"/user/payment/handle/all"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.528Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.29.0.1:45456","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.528Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.29.0.1:45458","url":"/user/me"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.520Z","caller":"repository/logging.go:247","msg":"productsCategories_repo","Action":"GetProductsList","Request":{"Product_name":"","Category_name":"Метиз и крепеж","Categories_ids":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001],"Price_lower_limit":1,"Price_higher_limit":10000,"QueryParam":{"Skip":0,"Limit":12}}}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.529Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT pr.id, pr.name, description,price, cat.id, cat.name FROM products as pr JOIN (SELECT product_id, category_id FROM productscategories) as prcat ON pr.id = prcat.product_id JOIN (SELECT categories.id, categories.name From categories) as cat ON  prcat.category_id = cat.id WHERE pr.name ~* $1 AND (cat.name  ~* $2 AND cat.id = Any ($3)) AND price BETWEEN $4 AND $5 OFFSET $6 LIMIT $7","args":["","Метиз и крепеж","{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24, (truncated 3835 bytes)",1,10000,0,12],"time":0.008097905,"rowCount":9,"pid":38}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.531Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.531Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.532Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.532Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.535Z","caller":"v4/conn.go:354","msg":"Query","args":[142],"time":0.005495382,"rowCount":1,"pid":38,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.540Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[143],"time":0.005289005}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.547Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.29.0.1:45468","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.547Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.29.0.1:45484","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.548Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.29.0.1:45466","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.548Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.29.0.1:45482","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.548Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.29.0.1:45474","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.548Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.29.0.1:45480","url":"/allchats"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.549Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.549Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.549Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T16:51:10.549Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.552Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.29.0.1:56526","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.06}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.553Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.29.0.1:56526","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.016}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.553Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[144],"time":0.012099195,"rowCount":1,"pid":38}
gateway_1                     | 2024/08/08 16:51:10 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | 2024/08/08 16:51:10 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.556Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.556Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.561Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[145],"time":0.006800826}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.565Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[146],"time":0.003611147,"rowCount":1,"pid":38}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.569Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[147],"time":0.004566764,"rowCount":1,"pid":38}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.574Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[148],"time":0.004566449,"rowCount":1,"pid":38}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.578Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[149],"time":0.003764618,"rowCount":1,"pid":38}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.583Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[150],"time":0.004654098,"rowCount":1,"pid":38}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:10.583Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductsListByFilters","peer.address":"172.29.0.1:56526","grpc.code":"OK","grpc.time_ms":63.097}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.592Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":142}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.595Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[142],"time":0.002380862,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.597Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.002127496,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.598Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":5.116}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.601Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":143}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.604Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[143],"time":0.002018416,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.606Z","caller":"v4/conn.go:354","msg":"Query","pid":87,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.002336555,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.606Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":4.883}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.608Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":144}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.610Z","caller":"v4/conn.go:354","msg":"Query","pid":87,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[144],"time":0.001007492,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.612Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001810831,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.612Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":3.608}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.614Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":145}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.616Z","caller":"v4/conn.go:354","msg":"Query","pid":87,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[145],"time":0.001691963,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.617Z","caller":"v4/conn.go:354","msg":"Query","pid":87,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001495726,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.618Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":3.677}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.622Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":146}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.624Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[146],"time":0.001642293,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.626Z","caller":"v4/conn.go:354","msg":"Query","time":0.001566103,"rowCount":1,"pid":87,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.627Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":3.977}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.629Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":147}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.630Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":87,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[147],"time":0.00130647}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.632Z","caller":"v4/conn.go:354","msg":"Query","time":0.000744864,"rowCount":1,"pid":87,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.633Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":3.823}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.635Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":148}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.637Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":87,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[148],"time":0.001771394}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.639Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001197064,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.639Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":3.411}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.641Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":149}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.642Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":87,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[149],"time":0.001693496}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.643Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000442795,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.643Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":2.841}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.645Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":150}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.646Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[150],"time":0.000423957,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.646Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000331107,"rowCount":1,"pid":87}
company_service_1             | {"level":"info","ts":"2024-08-08T16:51:10.647Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:10Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.29.0.1:53260","grpc.code":"OK","grpc.time_ms":1.336}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:10.650Z","caller":"http/logging.go:19","msg":"/products/list/filter","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:11.512Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.29.0.1:45488","url":"/company/products"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
productscategories_service_1  | {"level":"error","ts":"2024-08-08T16:51:11.516Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:11.516Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:11.520Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.003760182,"rowCount":0,"pid":38}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T16:51:11.520Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T16:51:11Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.29.0.1:56526","grpc.code":"OK","grpc.time_ms":5.226}
gateway_1                     | {"level":"info","ts":"2024-08-08T16:51:11.521Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
