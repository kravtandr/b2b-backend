gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:25.479Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:25.476Z","caller":"v4/conn.go:354","msg":"Query","args":[0,0,12],"time":0.014636787,"rowCount":0,"pid":32,"sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:25.477Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:25Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:56954","grpc.code":"OK","grpc.time_ms":16.129}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.708Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.706Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:46074","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.710Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.001389728,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.710Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.867}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.710Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.711Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.000548915,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.711Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.001}
auth_service_1                | 2024/08/08 15:53:44 authDelivery -> GetUser 16
auth_service_1                | 2024/08/08 15:53:44 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.712Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.712Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.713Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.713Z","caller":"v4/conn.go:354","msg":"Query","pid":36,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.000600917,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.713Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":0.814}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.714Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.715Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.000886062,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.715Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.164}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.716Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.708Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:46078","url":"/user/me"}
gateway_1                     | 2024/08/08 15:53:44 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:53:44 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.714Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:46084","url":"/company/NaN"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.715Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:46086","url":"/user/me"}
gateway_1                     | 2024/08/08 15:53:44 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.720Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:44.715Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.717Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.001031968,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.717Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.266}
auth_service_1                | 2024/08/08 15:53:44 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.721Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:44.721Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.720Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.721Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.722Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.001022909,"rowCount":1,"pid":36,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.722Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.265}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.727Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.730Z","caller":"v4/conn.go:354","msg":"Query","pid":36,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.00349551,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.730Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":3.924}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:44.718Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0],"time":0.002740738,"rowCount":0,"pid":28}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.742Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:46132","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.743Z","caller":"http/logging.go:11","msg":"/user/payment/handle/all","method":"POST","remote_addr":"172.25.0.1:46100","url":"/user/payment/handle/all"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.743Z","caller":"http/logging.go:11","msg":"/products/list/filter","method":"POST","remote_addr":"172.25.0.1:46102","url":"/products/list/filter"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.744Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:46104","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.744Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:46112","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.744Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:46120","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.745Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:46124","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.745Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:46126","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.745Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:46128","url":"/user/me"}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:44.734Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.734Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.737Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.002971403,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.738Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":3.608}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:44.747Z","caller":"repository/logging.go:247","msg":"productsCategories_repo","Action":"GetProductsList","Request":{"Product_name":"","Category_name":"Метиз и крепеж","Categories_ids":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001],"Price_lower_limit":1,"Price_higher_limit":10000,"QueryParam":{"Skip":0,"Limit":12}}}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:44.751Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.079}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:44.753Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.962}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.754Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:44.719Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:44.719Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:37642","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":3.724}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.755Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.756Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.756Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.756Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.746Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:46130","url":"/allchats"}
gateway_1                     | 2024/08/08 15:53:44 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.749Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | 2024/08/08 15:53:44 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.753Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | 2024/08/08 15:53:44 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.755Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.756Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.756Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.756Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.764Z","caller":"v4/conn.go:354","msg":"Query","time":0.009070146,"rowCount":1,"pid":36,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.765Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":10.837}
gateway_1                     | 2024/08/08 15:53:44 Helpers ValidateSession set UserIDContextKey:  16
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.773Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
gateway_1                     | 2024/08/08 15:53:44 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.775Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.010704841,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.776Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":20.113}
auth_service_1                | 2024/08/08 15:53:44 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.778Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.779Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.003290077,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.779Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":23.826}
gateway_1                     | 2024/08/08 15:53:44 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:53:44 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.782Z","caller":"v4/conn.go:354","msg":"Query","time":0.001431093,"rowCount":1,"pid":36,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.782Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":26.275}
auth_service_1                | 2024/08/08 15:53:44 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.782Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | 2024/08/08 15:53:44 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.785Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.786Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.003327574,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.787Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":31.102}
gateway_1                     | 2024/08/08 15:53:44 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:53:44 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.788Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":36,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.000795719}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.788Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":32.396}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.791Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.793Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.795Z","caller":"v4/conn.go:354","msg":"Query","pid":36,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.006036171,"rowCount":1}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.797Z","caller":"v4/conn.go:354","msg":"Dialing PostgreSQL server","host":"postgres"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.797Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":19.59}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.800Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.801Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.003868088,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.802Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":19.655}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.803Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.806Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.00357951,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.806Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":20.849}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.809Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.810Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.00335727,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.810Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUserIdByCookie","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":18.628}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.811Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.00129491,"rowCount":1,"pid":36}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.813Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":13.166}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.813Z","caller":"repository/logging.go:98","msg":"auth_repo","Action":"GetUsersPayments","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.815Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.003150805,"rowCount":1,"pid":36}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:44.816Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.816Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.818Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":15.499}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:44.820Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.820Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.821Z","caller":"v4/conn.go:354","msg":"Query","time":0.002610802,"rowCount":1,"pid":36,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.821Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":11.983}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:44.822Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.822Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.825Z","caller":"v4/conn.go:354","msg":"Query","pid":38,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.051719049,"rowCount":1}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:44.846Z","caller":"v4/conn.go:354","msg":"Query","args":["","Метиз и крепеж","{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24, (truncated 3835 bytes)",1,10000,0,12],"time":0.097923175,"rowCount":9,"pid":32,"sql":"SELECT pr.id, pr.name, description,price, cat.id, cat.name FROM products as pr JOIN (SELECT product_id, category_id FROM productscategories) as prcat ON pr.id = prcat.product_id JOIN (SELECT categories.id, categories.name From categories) as cat ON  prcat.category_id = cat.id WHERE pr.name ~* $1 AND (cat.name  ~* $2 AND cat.id = Any ($3)) AND price BETWEEN $4 AND $5 OFFSET $6 LIMIT $7"}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.870Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":38,"sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.044583627}
chat_service_1                | 2024/08/08 15:53:44 chats_amount =  1
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.874Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.004178241,"rowCount":1,"pid":38}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.875Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllUserChats","peer.address":"172.25.0.1:54942","grpc.code":"OK","grpc.time_ms":101.857}
gateway_1                     | 2024/08/08 15:53:44 Chat already unblurred:  77  Blured:  false
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.884Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.897Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.012489387,"rowCount":1,"pid":38,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1"}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.900Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.00350358,"rowCount":1,"pid":38}
chat_service_1                | 2024/08/08 15:53:44 chats_amount =  1
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:44.913Z","caller":"v4/conn.go:354","msg":"Query","args":[142],"time":0.066066602,"rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1"}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.927Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.02537527,"rowCount":1,"pid":38}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.931Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllChatsAndLastMsg","peer.address":"172.25.0.1:54942","grpc.code":"OK","grpc.time_ms":47.104}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:44.939Z","caller":"v4/conn.go:354","msg":"Query","time":0.02564411,"rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[143]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:44.941Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":186}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:44.968Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[186],"time":0.026462578,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:44.970Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.002648116,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:44.971Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":30.305}
gateway_1                     | 2024/08/08 15:53:44 userId from cookie: 16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:44.975Z","caller":"http/logging.go:19","msg":"/allchats","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.989Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":87,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.063301187}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:44.991Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[144],"time":0.051868737,"rowCount":1,"pid":32}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.991Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":278.028}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:44.996Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:44.999Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[145],"time":0.008125194,"rowCount":1,"pid":32}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.001Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.00982581,"rowCount":1,"pid":87}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.004Z","caller":"v4/conn.go:354","msg":"Query","pid":91,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.06120536,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.002Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":186.064}
gateway_1                     | 2024/08/08 15:53:45 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.006Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.011Z","caller":"v4/conn.go:354","msg":"Query","pid":87,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.005319308,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.011Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":191.355}
gateway_1                     | 2024/08/08 15:53:45 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.013Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:45.013Z","caller":"v4/conn.go:354","msg":"Query","args":[146],"time":0.0126004,"rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.019Z","caller":"v4/conn.go:354","msg":"Query","time":0.007055488,"rowCount":1,"pid":87,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.019Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":197.078}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:45.022Z","caller":"v4/conn.go:354","msg":"Query","pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[147],"time":0.00699032,"rowCount":1}
gateway_1                     | 2024/08/08 15:53:45 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.024Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:45.028Z","caller":"v4/conn.go:354","msg":"Query","time":0.006574241,"rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[148]}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:45.035Z","caller":"v4/conn.go:354","msg":"Query","time":0.006338778,"rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[149]}
gateway_1                     | 2024/08/08 15:53:45 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.041Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.040Z","caller":"v4/conn.go:354","msg":"Query","time":0.087400357,"rowCount":1,"pid":88,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.040Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":320.092}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:45.045Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[150],"time":0.010314338,"rowCount":1,"pid":32}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:45.045Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductsListByFilters","peer.address":"172.25.0.1:56954","grpc.code":"OK","grpc.time_ms":298.65}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.050Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.06183633,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.050Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":295.137}
gateway_1                     | 2024/08/08 15:53:45 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | 2024/08/08 15:53:45 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.055Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.060Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":142}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.063Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[142],"time":0.000564634}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.064Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.001229859,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.064Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.53}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.066Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":143}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.068Z","caller":"v4/conn.go:354","msg":"Query","args":[143],"time":0.002053397,"rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.070Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001378955,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.070Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":3.847}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.071Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":144}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.073Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[144],"time":0.001554241,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.074Z","caller":"v4/conn.go:354","msg":"Query","pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000819286,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.074Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":2.656}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.076Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":145}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.079Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[145],"time":0.000624573,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.079Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000536701,"rowCount":1,"pid":28}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.086Z","caller":"v4/conn.go:354","msg":"Query","time":0.080642811,"rowCount":1,"pid":91,"sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16]}
chat_service_1                | 2024/08/08 15:53:45 chats_amount =  1
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.084Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.027153431,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.084Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":29.567}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.080Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":3.721}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.082Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":146}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.088Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.087Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[146],"time":0.005028653,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.090Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000560806}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.091Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":8.842}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.093Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.005138204,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.094Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":6.529}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.095Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":147}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.095Z","caller":"v4/conn.go:354","msg":"Query","args":[147],"time":0.000827662,"rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.097Z","caller":"v4/conn.go:354","msg":"Query","pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.00110272,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.097Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":2.667}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.100Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":148}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:45.098Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.098Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
gateway_1                     | 2024/08/08 15:53:45 Chat already unblurred:  77  Blured:  false
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.109Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.02302917,"rowCount":1,"pid":91}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.109Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllUserChats","peer.address":"172.25.0.1:54942","grpc.code":"OK","grpc.time_ms":316.407}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.102Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[148],"time":0.001681214,"rowCount":1,"pid":28}
gateway_1                     | 2024/08/08 15:53:45 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.117Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.112Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.116Z","caller":"v4/conn.go:354","msg":"Query","pid":92,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.018044619,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.116Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":18.612}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.121Z","caller":"v4/conn.go:354","msg":"Query","pid":91,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.008424824,"rowCount":1}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.128Z","caller":"v4/conn.go:354","msg":"Query","time":0.005842893,"rowCount":1,"pid":91,"sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16]}
chat_service_1                | 2024/08/08 15:53:45 chats_amount =  1
gateway_1                     | 2024/08/08 15:53:45 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS &[]
gateway_1                     | 2024/08/08 15:53:45 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS CONFIRMED
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.122Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.102230418,"rowCount":1,"pid":87,"sql":"SELECT COUNT(id) FROM Payments WHERE user_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.122Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersPayments","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":309.103}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.103Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001076349,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.103Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":3.158}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.108Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":149}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.114Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[149],"time":0.004383748,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.115Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.0008946,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.115Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":6.676}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.118Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":150}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.119Z","caller":"v4/conn.go:354","msg":"Query","args":[150],"time":0.000835934,"rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
auth_service_1                | 2024/08/08 15:53:45 in service delivery -> authDelivery -> HandlePaidPayments 16
auth_service_1                | 2024/08/08 15:53:45  in service usecase -> authUseCase -> HandlePaidPayments 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.127Z","caller":"repository/logging.go:98","msg":"auth_repo","Action":"GetUsersPayments","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.134Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.005732596,"rowCount":1,"pid":91}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.134Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllChatsAndLastMsg","peer.address":"172.25.0.1:54942","grpc.code":"OK","grpc.time_ms":23.063}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.121Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.00185584}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.130Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":11.382}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.142Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":186}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.143Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[186],"time":0.0006705,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.144Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000388758,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:45.144Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":1.648}
gateway_1                     | 2024/08/08 15:53:45 userId from cookie: 16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.148Z","caller":"http/logging.go:19","msg":"/allchats","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.150Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.109573409,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.150Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:44Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":154.865}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.152Z","caller":"v4/conn.go:354","msg":"Query","time":0.004414558,"rowCount":1,"pid":92,"sql":"SELECT COUNT(id) FROM Payments WHERE user_id = $1","args":[16]}
auth_service_1                | 2024/08/08 15:53:45 No payments for user
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.152Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"HandlePaidPayments","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":26.745}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.154Z","caller":"http/logging.go:19","msg":"/products/list/filter","status":200}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:45.160Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.160Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
gateway_1                     | 2024/08/08 15:53:45 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS CREDITED
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.164Z","caller":"http/logging.go:19","msg":"/user/payment/handle/all","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.175Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.000785894,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:45.175Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":14.504}
gateway_1                     | 2024/08/08 15:53:45 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.176Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.711Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:40624","url":"/company/products"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:53:45.712Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:45.715Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:45.712Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:45.714Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.001149616,"rowCount":0,"pid":32}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:45.714Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:45Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:56954","grpc.code":"OK","grpc.time_ms":1.702}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:46.682Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:40628","url":"/company/NaN"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:46.683Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:46.685Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0],"time":0.00186274,"rowCount":0,"pid":28}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:46.686Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:46.685Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:46.685Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:53:46Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:37642","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":2.412}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.691Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.692Z","caller":"v4/conn.go:354","msg":"Query","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.000872009,"rowCount":1,"pid":92,"sql":"SELECT user_id FROM Cookies WHERE hash = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.692Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:46Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.2}
auth_service_1                | 2024/08/08 15:53:46 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.695Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.696Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.000803979,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.696Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:46Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.063}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.697Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.698Z","caller":"v4/conn.go:354","msg":"Query","time":0.000486344,"rowCount":1,"pid":92,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.698Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:46Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":0.651}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:46.692Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:46Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.057}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:46.693Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:46Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.03}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:46.689Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:40638","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:46.690Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:40636","url":"/product/profile"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:46.692Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:40640","url":"/product/profile"}
gateway_1                     | 2024/08/08 15:53:46 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:53:46 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:46.694Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
gateway_1                     | 2024/08/08 15:53:46 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:46.694Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
gateway_1                     | 2024/08/08 15:53:46 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:46.700Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:46.698Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.698Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.699Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":92,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.000532824}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:46.699Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:46Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":0.795}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:47.686Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:40644","url":"/company/products"}
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:53:47.687Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:47.687Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:47.688Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.00131132,"rowCount":0,"pid":32}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:47.689Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:47.688Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:47Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:56954","grpc.code":"OK","grpc.time_ms":1.769}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.459Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:40648","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.460Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.462Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.001162682,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.462Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.487}
auth_service_1                | 2024/08/08 15:53:50 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.463Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.465Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.001293434,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.465Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.657}
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.465Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:40660","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.466Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:40652","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.468Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.468Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.469Z","caller":"v4/conn.go:354","msg":"Query","time":0.000727815,"rowCount":1,"pid":92,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.469Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.01}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.472Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.003774625,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.472Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":4.069}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.475Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.476Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.000997203,"rowCount":1,"pid":88,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.476Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.39}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.476Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.477Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.000879382,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.478Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.125}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.472Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.473Z","caller":"v4/conn.go:354","msg":"Query","pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0],"time":0.000796172,"rowCount":0}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.473Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.473Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:37642","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":1.098}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.487Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.149}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.487Z","caller":"repository/logging.go:247","msg":"productsCategories_repo","Action":"GetProductsList","Request":{"Product_name":"","Category_name":"Метиз и крепеж","Categories_ids":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001],"Price_lower_limit":1,"Price_higher_limit":10000,"QueryParam":{"Skip":0,"Limit":12}}}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.487Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.021}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.495Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.468Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:40656","url":"/company/NaN"}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.500Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.00544183,"rowCount":1,"pid":91}
auth_service_1                | 2024/08/08 15:53:50 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.480Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | 2024/08/08 15:53:50 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.482Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.482Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.000752579,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.482Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":0.958}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.483Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.002796325,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.483Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":2.995}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:50.481Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.481Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.483Z","caller":"v4/conn.go:354","msg":"Query","args":[16,13],"time":0.000432451,"rowCount":1,"pid":88,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.483Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":2.258}
auth_service_1                | 2024/08/08 15:53:50 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.485Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.487Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.487Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.487Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.487Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.00210162,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.487Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":2.283}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.488Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.000539746,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.488Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.136}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.488Z","caller":"v4/conn.go:354","msg":"Query","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.000434673,"rowCount":1,"pid":88,"sql":"SELECT user_id FROM Cookies WHERE hash = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.488Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":1.567}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.491Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.491Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.499Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.007808209,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.499Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":8.106}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.474Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.475Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:40666","url":"/user/me"}
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.478Z","caller":"http/logging.go:11","msg":"/products/list/filter","method":"POST","remote_addr":"172.25.0.1:40668","url":"/products/list/filter"}
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.484Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:40690","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.484Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:40680","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.484Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:40686","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.485Z","caller":"http/logging.go:11","msg":"/user/payment/handle/all","method":"POST","remote_addr":"172.25.0.1:40684","url":"/user/payment/handle/all"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.485Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:40688","url":"/product/chat"}
gateway_1                     | 2024/08/08 15:53:50 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.486Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.490Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:40696","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.490Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:40692","url":"/user/me"}
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:53:50 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.498Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | 2024/08/08 15:53:50 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.498Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.498Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:40700","url":"/user/me"}
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.499Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.500Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.500Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | 2024/08/08 15:53:50 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.500Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.501Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.002011951,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.501Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":10.163}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.502Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.000646677,"rowCount":1,"pid":88,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.502Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":2.598}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.504Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.001927315,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.504Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":4.519}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.501Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:50.505Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.504Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:50.505Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.505Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:50.505Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.505Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.505Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":88,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.000591504}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.505Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":4.347}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.509Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.513Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.009187023,"rowCount":1,"pid":91}
chat_service_1                | 2024/08/08 15:53:50 chats_amount =  1
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.513Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.004532848,"rowCount":1,"pid":38}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.511Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.001400572,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.512Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":11.746}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.518Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.004669997,"rowCount":1,"pid":38}
chat_service_1                | 2024/08/08 15:53:50 chats_amount =  1
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.526Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.007414078,"rowCount":1,"pid":38,"sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id"}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.526Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllUserChats","peer.address":"172.25.0.1:54942","grpc.code":"OK","grpc.time_ms":17.111}
gateway_1                     | 2024/08/08 15:53:50 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.522Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
gateway_1                     | 2024/08/08 15:53:50 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | 2024/08/08 15:53:50 Chat already unblurred:  77  Blured:  false
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.527Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.519Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.006777027,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.519Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":14.538}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.519Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | 2024/08/08 15:53:50 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.520Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.523Z","caller":"v4/conn.go:354","msg":"Query","time":0.003326534,"rowCount":1,"pid":88,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.523Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":3.655}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.525Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.00198478,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.525Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":20.657}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:50.526Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.526Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.527Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.013819178,"rowCount":1,"pid":91}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.527Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllUserChats","peer.address":"172.25.0.1:54942","grpc.code":"OK","grpc.time_ms":32.459}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.528Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.532Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.006512915,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.532Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":27.329}
gateway_1                     | 2024/08/08 15:53:50 Chat already unblurred:  77  Blured:  false
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.535Z","caller":"repository/logging.go:113","msg":"auth_repo","Action":"GetAllChatsAndLastMsg","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.536Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.003801984,"rowCount":1,"pid":88}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.536Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":36.604}
gateway_1                     | 2024/08/08 15:53:50 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.537Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.538Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.002974451,"rowCount":1,"pid":38}
auth_service_1                | 2024/08/08 15:53:50 authDelivery -> GetUser 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.542Z","caller":"repository/logging.go:149","msg":"auth_repo","Action":"GetUserByID","Request":16}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.542Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.004661472,"rowCount":1,"pid":38}
chat_service_1                | 2024/08/08 15:53:50 chats_amount =  1
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.545Z","caller":"v4/conn.go:354","msg":"Query","args":["","Метиз и крепеж","{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24, (truncated 3835 bytes)",1,10000,0,12],"time":0.058295337,"rowCount":9,"pid":32,"sql":"SELECT pr.id, pr.name, description,price, cat.id, cat.name FROM products as pr JOIN (SELECT product_id, category_id FROM productscategories) as prcat ON pr.id = prcat.product_id JOIN (SELECT categories.id, categories.name From categories) as cat ON  prcat.category_id = cat.id WHERE pr.name ~* $1 AND (cat.name  ~* $2 AND cat.id = Any ($3)) AND price BETWEEN $4 AND $5 OFFSET $6 LIMIT $7"}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.546Z","caller":"v4/conn.go:354","msg":"Query","time":0.003288598,"rowCount":1,"pid":38,"sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16]}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.546Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllChatsAndLastMsg","peer.address":"172.25.0.1:54942","grpc.code":"OK","grpc.time_ms":11.601}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.549Z","caller":"v4/conn.go:354","msg":"Query","time":0.011718862,"rowCount":1,"pid":88,"sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.549Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":29.586}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.549Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.062793326,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.549Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"ValidateSession","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":63.033}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.549Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":91,"sql":"SELECT  chat.id, chat.name, chat.creator_id, chat.product_id, chat.status, chat.blured FROM Chats as chat WHERE chat.creator_id = $1","args":[16],"time":0.021229936}
gateway_1                     | 2024/08/08 15:53:50 Helpers ValidateSession set UserIDContextKey:  16
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.554Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":186}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.557Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13],"time":0.008042584,"rowCount":1,"pid":88}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.556Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":91,"sql":"SELECT Count(*) FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.003834178}
chat_service_1                | 2024/08/08 15:53:50 chats_amount =  1
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.559Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":31.872}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.561Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, surname, patronymic, country, email, password, group_id, balance FROM Users WHERE id = $1","args":[16],"time":0.011090961,"rowCount":1,"pid":92}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.561Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUser","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":18.725}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.561Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.562Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[186],"time":0.00794044}
gateway_1                     | 2024/08/08 15:53:50 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.564Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.565Z","caller":"v4/conn.go:354","msg":"Query","time":0.003131563,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.566Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":12.004}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.565Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
gateway_1                     | 2024/08/08 15:53:50 userId from cookie: 16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.568Z","caller":"http/logging.go:19","msg":"/allchats","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.570Z","caller":"repository/logging.go:185","msg":"auth_repo","Action":"GetUsersCompany","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.573Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":92,"sql":"SELECT user_id FROM Cookies WHERE hash = $1","args":["709eb778-8018-43f0-9097-d0d3966e9ba2"],"time":0.011770911}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.573Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUserIdByCookie","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":12.208}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.573Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.006640949,"rowCount":1,"pid":88,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.574Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":9.618}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.574Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT msg2.chat_id, chats.name, chats.creator_id, product_id, chats.status, chats.blured, msg2.id, msg2.sender_id, msg2.receiver_id, msg2.checked, msg2.text, msg2.type, msg2.created_at FROM Msgs as msg2 JOIN (SELECT max(msg1.id), min(msg1.created_at) as time, msg1.chat_id FROM Msgs as msg1 WHERE msg1.sender_id = $1 OR msg1.receiver_id = $1 GROUP BY msg1.chat_id) as msg3 on msg3.max = msg2.id JOIN Chats as chats on msg2.chat_id = chats.id","args":[16],"time":0.015234155,"rowCount":1,"pid":91}
chat_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.576Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.chat_service.ChatService","grpc.method":"GetAllChatsAndLastMsg","peer.address":"172.25.0.1:54942","grpc.code":"OK","grpc.time_ms":48.122}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.578Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":186}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.571Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[142],"time":0.025494182,"rowCount":1,"pid":32}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.578Z","caller":"repository/logging.go:98","msg":"auth_repo","Action":"GetUsersPayments","Request":16}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:50.581Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.581Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.581Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[186],"time":0.0017732,"rowCount":1,"pid":28}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.585Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":88,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified  FROM Companies WHERE owner_id = $1","args":[16],"time":0.011250339}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.587Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersCompany","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":15.603}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.587Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[143],"time":0.008250197}
auth_service_1                | {"level":"error","ts":"2024-08-08T15:53:50.589Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":13,"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/auth/repository.(*loggingMiddleware).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/repository/logging.go:203\nb2b/m/internal/services/auth/usecase.(*authUseCase).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/usecase/usecase.go:337\nb2b/m/internal/services/auth/delivery.(*authDelivery).GetCompanyUserLink\n\t/go/src/b2b/m/internal/services/auth/delivery/delivery.go:228\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler.func1\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:555\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/auth._AuthService_GetCompanyUserLink_Handler\n\t/go/src/b2b/m/pkg/services/auth/api_grpc.pb.go:557\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.591Z","caller":"v4/conn.go:354","msg":"Query","pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.009248848,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.592Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":14.158}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.589Z","caller":"repository/logging.go:203","msg":"auth_repo","Action":"GetCompanyUserLink","Request":16}
gateway_1                     | 2024/08/08 15:53:50 userId from cookie: 16
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.595Z","caller":"http/logging.go:19","msg":"/allchats","status":200}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.597Z","caller":"v4/conn.go:354","msg":"Query","args":[16,13],"time":0.009967315,"rowCount":1,"pid":88,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.599Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":18.193}
gateway_1                     | 2024/08/08 15:53:50 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.603Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.604Z","caller":"v4/conn.go:354","msg":"Query","time":0.015867049,"rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[144]}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.609Z","caller":"v4/conn.go:354","msg":"Query","pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[145],"time":0.005210189,"rowCount":1}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.613Z","caller":"v4/conn.go:354","msg":"Query","args":[16],"time":0.012961141,"rowCount":1,"pid":88,"sql":"SELECT COUNT(id) FROM Payments WHERE user_id = $1"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.614Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetUsersPayments","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":36.798}
gateway_1                     | 2024/08/08 15:53:50 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS &[]
gateway_1                     | 2024/08/08 15:53:50 Gateway -> Usecase -> HandlePaidPayments -> PAYMENTS CONFIRMED
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.617Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[146],"time":0.005973645,"rowCount":1,"pid":32}
auth_service_1                | 2024/08/08 15:53:50 in service delivery -> authDelivery -> HandlePaidPayments 16
auth_service_1                | 2024/08/08 15:53:50  in service usecase -> authUseCase -> HandlePaidPayments 16
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.621Z","caller":"repository/logging.go:98","msg":"auth_repo","Action":"GetUsersPayments","Request":16}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.625Z","caller":"v4/conn.go:354","msg":"Query","time":0.010540244,"rowCount":1,"pid":88,"sql":"SELECT  id, post, company_id, user_id, itn FROM CompaniesUsers WHERE user_id = $1 and company_id = $2","args":[16,13]}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:50.627Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.auth_service.AuthService","grpc.method":"GetCompanyUserLink","peer.address":"172.25.0.1:59762","grpc.code":"OK","grpc.time_ms":37.345}
gateway_1                     | 2024/08/08 15:53:50 GetUserByCookie SetCookie: 709eb778-8018-43f0-9097-d0d3966e9ba2  id  16  email  test_chat@mail.ru
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.629Z","caller":"http/logging.go:19","msg":"/user/me","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.632Z","caller":"v4/conn.go:354","msg":"Query","args":[147],"time":0.010212022,"rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.637Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[148],"time":0.003692607}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.648Z","caller":"v4/conn.go:354","msg":"Query","pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[149],"time":0.010866676,"rowCount":1}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.657Z","caller":"v4/conn.go:354","msg":"Query","time":0.009152473,"rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[150]}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:50.658Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductsListByFilters","peer.address":"172.25.0.1:56954","grpc.code":"OK","grpc.time_ms":170.755}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.664Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":142}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.666Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[142],"time":0.001366397}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.669Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.002507036}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.669Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.697}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.672Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":143}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.675Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[143],"time":0.001309519}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.677Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.001471906,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.677Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.962}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.681Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":144}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.684Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[144],"time":0.003073529,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.686Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.001772699,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.686Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":5.886}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.689Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":145}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.691Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[145],"time":0.001822235,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.693Z","caller":"v4/conn.go:354","msg":"Query","pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.000703631,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.693Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.217}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.697Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":146}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.699Z","caller":"v4/conn.go:354","msg":"Query","pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[146],"time":0.000643921,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.701Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001712728}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.701Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.518}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.705Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":147}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.708Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[147],"time":0.002188965,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.710Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001578381,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.710Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.575}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.712Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":148}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.714Z","caller":"v4/conn.go:354","msg":"Query","pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[148],"time":0.001850127,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.716Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001493063}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.716Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":3.788}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.719Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":149}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.720Z","caller":"v4/conn.go:354","msg":"Query","args":[149],"time":0.001724106,"rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.722Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.001716558,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.722Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":3.803}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.724Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":150}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.725Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[150],"time":0.001213574,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.727Z","caller":"v4/conn.go:354","msg":"Query","time":0.001914498,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:50.727Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:50Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":3.617}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:50.734Z","caller":"http/logging.go:19","msg":"/products/list/filter","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:51.465Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:40704","url":"/company/products"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:53:51.468Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:51.468Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:51.473Z","caller":"v4/conn.go:354","msg":"Query","pid":32,"sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.002710081,"rowCount":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:51.474Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:51Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:56954","grpc.code":"OK","grpc.time_ms":4.946}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:51.476Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:52.004Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:40708","url":"/company/NaN"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:52.004Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:40712","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:52.008Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:40720","url":"/product/profile"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:52.008Z","caller":"http/logging.go:11","msg":"/product/profile","method":"GET","remote_addr":"172.25.0.1:40716","url":"/product/profile"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:52.012Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:52Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.086}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:52.012Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:52Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.053}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:52.011Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:52.011Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
gateway_1                     | 2024/08/08 15:53:52 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:52.018Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
gateway_1                     | 2024/08/08 15:53:52 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:52.018Z","caller":"http/logging.go:19","msg":"/product/profile","status":400}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:52.017Z","caller":"v4/conn.go:354","msg":"Query","args":[0],"time":0.005989612,"rowCount":0,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:52.017Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:52.017Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:53:52Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:37642","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":6.539}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:52.023Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:53.005Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:40724","url":"/company/products"}
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:53:53.007Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:53.007Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:53.010Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:53.009Z","caller":"v4/conn.go:354","msg":"Query","time":0.001465172,"rowCount":0,"pid":32,"sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12]}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:53.009Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:53Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:56954","grpc.code":"OK","grpc.time_ms":2.003}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:54.971Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:54.977Z","caller":"repository/logging.go:100","msg":"company_repo","Action":"GetCompanyById","Request":0}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:54.978Z","caller":"v4/conn.go:354","msg":"Query","time":0.000736665,"rowCount":0,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[0]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:54.978Z","caller":"repository/logging.go:106","msg":"company_repo","Action":"GetCompanyById","Request":0,"Error":"company does not exist"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:54.978Z","caller":"zap/options.go:212","msg":"finished unary call with code NotFound","grpc.start_time":"2024-08-08T15:53:54Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyById","peer.address":"172.25.0.1:37642","error":"rpc error: code = NotFound desc = not found","grpc.code":"NotFound","grpc.time_ms":1.217}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:54.973Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:54.980Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.971Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:38144","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.972Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:38148","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.976Z","caller":"http/logging.go:11","msg":"/company/NaN","method":"GET","remote_addr":"172.25.0.1:38152","url":"/company/NaN"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.979Z","caller":"http/logging.go:19","msg":"/company/NaN","status":404}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.980Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:38156","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:54.989Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:54.991Z","caller":"repository/logging.go:247","msg":"productsCategories_repo","Action":"GetProductsList","Request":{"Product_name":"","Category_name":"Метиз и крепеж","Categories_ids":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001],"Price_lower_limit":1,"Price_higher_limit":10000,"QueryParam":{"Skip":0,"Limit":12}}}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:54.997Z","caller":"v4/conn.go:354","msg":"Query","time":0.005745878,"rowCount":9,"pid":32,"sql":"SELECT pr.id, pr.name, description,price, cat.id, cat.name FROM products as pr JOIN (SELECT product_id, category_id FROM productscategories) as prcat ON pr.id = prcat.product_id JOIN (SELECT categories.id, categories.name From categories) as cat ON  prcat.category_id = cat.id WHERE pr.name ~* $1 AND (cat.name  ~* $2 AND cat.id = Any ($3)) AND price BETWEEN $4 AND $5 OFFSET $6 LIMIT $7","args":["","Метиз и крепеж","{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24, (truncated 3835 bytes)",1,10000,0,12]}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.000Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.064}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.000Z","caller":"zap/options.go:212","msg":"finished unary call with code InvalidArgument","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductById","peer.address":"172.25.0.1:56954","error":"rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0","grpc.code":"InvalidArgument","grpc.time_ms":0.024}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.003Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[142],"time":0.005599318}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.988Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:38162","url":"/user/me"}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.990Z","caller":"http/logging.go:11","msg":"/products/list/filter","method":"POST","remote_addr":"172.25.0.1:38164","url":"/products/list/filter"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.998Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:38180","url":"/product/chat"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.998Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:38176","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:54.998Z","caller":"http/logging.go:11","msg":"/product/chat","method":"GET","remote_addr":"172.25.0.1:38174","url":"/product/chat"}
gateway_1                     | 2024/08/08 15:53:55 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.001Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | 2024/08/08 15:53:55 Error GetProductById -> GetProductById rpc error: code = InvalidArgument desc = invalid GetProductByID.Id: value must be greater than 0
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.001Z","caller":"http/logging.go:19","msg":"/product/chat","status":400}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.005Z","caller":"http/logging.go:11","msg":"/user/payment/handle/all","method":"POST","remote_addr":"172.25.0.1:38178","url":"/user/payment/handle/all"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.006Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:38196","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.006Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:38190","url":"/user/me"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.006Z","caller":"http/logging.go:11","msg":"/allchats","method":"GET","remote_addr":"172.25.0.1:38192","url":"/allchats"}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.006Z","caller":"http/logging.go:11","msg":"/user/me","method":"GET","remote_addr":"172.25.0.1:38194","url":"/user/me"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:55.002Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:55.007Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:55.008Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:55.008Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:55.008Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
auth_service_1                | {"level":"info","ts":"2024-08-08T15:53:55.008Z","caller":"repository/logging.go:290","msg":"auth_repo","Action":"ValidateUserSession","Request":"709eb778-8018-43f0-9097-d0d3966e9ba2"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.010Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[143],"time":0.006547208}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.021Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[144],"time":0.011319572,"rowCount":1,"pid":32}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.026Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[145],"time":0.005047249,"rowCount":1,"pid":32}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.033Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[146],"time":0.004537326,"rowCount":1,"pid":32}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.038Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[147],"time":0.004272079,"rowCount":1,"pid":32}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.044Z","caller":"v4/conn.go:354","msg":"Query","time":0.005492611,"rowCount":1,"pid":32,"sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[148]}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.051Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[149],"time":0.006645897,"rowCount":1,"pid":32}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.058Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT photo_obj_name FROM ProductPhotos WHERE product_id = $1","args":[150],"time":0.007322865,"rowCount":1,"pid":32}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.059Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:54Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetProductsListByFilters","peer.address":"172.25.0.1:56954","grpc.code":"OK","grpc.time_ms":67.406}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.063Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":142}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.065Z","caller":"v4/conn.go:354","msg":"Query","args":[142],"time":0.001949337,"rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.067Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.002036338,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.067Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.645}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.070Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":143}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.072Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[143],"time":0.001903608}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.074Z","caller":"v4/conn.go:354","msg":"Query","args":[4],"time":0.00162234,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.075Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.272}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.078Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":144}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.079Z","caller":"v4/conn.go:354","msg":"Query","pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[144],"time":0.001666868,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.081Z","caller":"v4/conn.go:354","msg":"Query","time":0.00053909,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.081Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.026}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.085Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":145}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.086Z","caller":"v4/conn.go:354","msg":"Query","time":0.001528646,"rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[145]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.088Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001381231,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.089Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":4.417}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.091Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":146}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.092Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[146],"time":0.001304868}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.094Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001198766,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.094Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":3.211}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.097Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":147}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.099Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[147],"time":0.002471932}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.102Z","caller":"v4/conn.go:354","msg":"Query","time":0.002127256,"rowCount":1,"pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4]}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.102Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":5.459}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.107Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":148}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.109Z","caller":"v4/conn.go:354","msg":"Query","rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[148],"time":0.002094728}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.112Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.002274546,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.112Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":5.417}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.116Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":149}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.120Z","caller":"v4/conn.go:354","msg":"Query","args":[149],"time":0.004258317,"rowCount":1,"pid":28,"sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1"}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.122Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001445454,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.122Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":6.595}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.125Z","caller":"repository/logging.go:136","msg":"company_repo","Action":"GetCompanyByProductId","Request":150}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.126Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT  id, company_id, product_id, amount FROM CompaniesProducts WHERE product_id = $1","args":[150],"time":0.001032947,"rowCount":1,"pid":28}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.128Z","caller":"v4/conn.go:354","msg":"Query","pid":28,"sql":"SELECT id, name, description, legal_name, itn, psrn, address,legal_address,email, phone, link, activity, owner_id, rating , verified, photo_obj_name FROM Companies WHERE id = $1","args":[4],"time":0.001806457,"rowCount":1}
company_service_1             | {"level":"info","ts":"2024-08-08T15:53:55.128Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.company_service.CompanyService","grpc.method":"GetCompanyByProductId","peer.address":"172.25.0.1:37642","grpc.code":"OK","grpc.time_ms":3.514}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.133Z","caller":"http/logging.go:19","msg":"/products/list/filter","status":200}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.980Z","caller":"http/logging.go:11","msg":"/company/products","method":"POST","remote_addr":"172.25.0.1:38200","url":"/company/products"}
productscategories_service_1  | {"level":"error","ts":"2024-08-08T15:53:55.981Z","caller":"zap/sugar.go:210","msg":"Ignored key without a value.","ignored":{"Skip":0,"Limit":12},"stacktrace":"go.uber.org/zap.(*SugaredLogger).Infow\n\t/go/src/b2b/m/vendor/go.uber.org/zap/sugar.go:210\nb2b/m/internal/services/productsCategories/repository.(*loggingMiddleware).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/repository/logging.go:265\nb2b/m/internal/services/productsCategories/usecase.(*productsCategoriesUseCase).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/usecase/usecase.go:130\nb2b/m/internal/services/productsCategories/delivery.(*productsCategoriesDelivery).GetCompanyProducts\n\t/go/src/b2b/m/internal/services/productsCategories/delivery/delivery.go:244\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler.func1\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:343\ngithub.com/grpc-ecosystem/go-grpc-prometheus.(*ServerMetrics).UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-prometheus/server_metrics.go:107\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/validator.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/validator/validator.go:47\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/logging/zap.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/logging/zap/server_interceptors.go:31\ngoogle.golang.org/grpc.getChainUnaryHandler.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1156\ngithub.com/grpc-ecosystem/go-grpc-middleware/tags.UnaryServerInterceptor.func1\n\t/go/src/b2b/m/vendor/github.com/grpc-ecosystem/go-grpc-middleware/tags/interceptors.go:23\ngoogle.golang.org/grpc.chainUnaryInterceptors.func1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1147\nb2b/m/pkg/services/productsCategories._ProductsCategoriesService_GetCompanyProducts_Handler\n\t/go/src/b2b/m/pkg/services/productsCategories/api_grpc.pb.go:345\ngoogle.golang.org/grpc.(*Server).processUnaryRPC\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1337\ngoogle.golang.org/grpc.(*Server).handleStream\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:1714\ngoogle.golang.org/grpc.(*Server).serveStreams.func1.1\n\t/go/src/b2b/m/vendor/google.golang.org/grpc/server.go:959"}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.981Z","caller":"repository/logging.go:265","msg":"productsCategories_repo","Action":"GetCompanyProducts","Request":0}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.984Z","caller":"v4/conn.go:354","msg":"Query","sql":"SELECT id, name, description,price FROM products as pr JOIN (SELECT company_id, product_id FROM companiesproducts) as cppr on cppr.product_id = pr.id WHERE cppr.company_id = $1 OFFSET $2 LIMIT $3","args":[0,0,12],"time":0.001676182,"rowCount":0,"pid":32}
productscategories_service_1  | {"level":"info","ts":"2024-08-08T15:53:55.984Z","caller":"zap/options.go:212","msg":"finished unary call with code OK","grpc.start_time":"2024-08-08T15:53:55Z","system":"grpc","span.kind":"server","grpc.service":"services.productsCategories_service.ProductsCategoriesService","grpc.method":"GetCompanyProducts","peer.address":"172.25.0.1:56954","grpc.code":"OK","grpc.time_ms":2.531}
gateway_1                     | {"level":"info","ts":"2024-08-08T15:53:55.987Z","caller":"http/logging.go:19","msg":"/company/products","status":200}
gateway_1                     | GetQueryParams || SKIP ======  0 LIMIT ======  12
